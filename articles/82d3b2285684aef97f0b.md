---
title: "React 17 ã§æ”¹è‰¯ã•ã‚ŒãŸ JSX Transform ã¯ã©ã®ã‚ˆã†ãªã‚‚ã®ã‹"
description: "React ã‚’æ¯Žå›ž import ã—ãªãã¦ã‚ˆããªã£ãŸè©±"
emoji: "ðŸŽƒ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["React", "Babel", "Next.js", "Gatsby.js"]
published: true
---
JSX Transform ã¯ JSX ãŒãƒ–ãƒ©ã‚¦ã‚¶ã§ãã®ã¾ã¾å®Ÿè¡Œã§ããªã„ãŸã‚ã€Babel ã‚„ TypeScript ã‚’åˆ©ç”¨ã—ã€JSX ã‚’ JavaScript ã«å¤‰æ›ã™ã‚‹ã‚‚ã®ã§ã€React 17 ã§æ–°ã—ããªã‚Šæ”¹å–„ã•ã‚ŒãŸç‚¹ã‚’ç´¹ä»‹ã—ã¦ã„ãã¾ã™ã€‚

# æ–°ã—ã„ JSX Transform ã§ä½•ãŒå¤‰ã‚ã‚‹ã®ã‹

JSX ã§æ¯Žå›ž React ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆã—ãªãã¦ã‚ˆããªã‚Šã¾ã™ã€‚
```js
// ã“ã® import ãŒä¸è¦ã«ãªã‚Šã¾ã™
import React from 'react'
```

## ãã‚‚ãã‚‚ä½•æ•… React ã® import ãŒå¿…è¦ãªã®ã‹

ãŸã¨ãˆã°ä¸‹è¨˜ã®ã‚ˆã†ãªã‚³ãƒ¼ãƒ‰ã§ã©ã“ã«ã‚‚ React ã‚’ä½¿ã£ã¦ã„ãªã„ã® import ã›ãšå®Ÿè¡Œã—ãŸå ´åˆã€ `ReferenceError React is not defined` ã¨ã„ã£ãŸã‚¨ãƒ©ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ã€‚

```jsx
import React from 'react' // ã“ã® import ã¯ä¸è¦ãªã®ã§ã¯ï¼Ÿ

const Foo = () => {
  return <h1>Hello World</h1>
}
```

ã“ã®ã‚¨ãƒ©ãƒ¼ã®åŽŸå› ã¯ãƒˆãƒ©ãƒ³ã‚¹ãƒ‘ã‚¤ãƒ«å¾Œã®ã‚³ãƒ¼ãƒ‰ã«åŽŸå› ãŒã‚ã£ã¦ã€å®Ÿéš›ã«å®Ÿè¡Œæ™‚ã•ã‚Œã‚‹ JavaScript ã®ã‚³ãƒ¼ãƒ‰ã‚’è¦‹ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

### å¾“æ¥ã® JSX Transform ã§ React ã‚’ import ã—ãªã‹ã£ãŸå ´åˆ

import ã‚’å‰Šé™¤ã—ã¦ãƒˆãƒ©ãƒ³ã‚¹ãƒ‘ã‚¤ãƒ«ã—ã¦ã¿ã¾ã™ã€‚
```jsx
const Foo = () => {
  return <h1>Hello World</h1>
}
```

ãƒˆãƒ©ãƒ³ã‚¹ãƒ‘ã‚¤ãƒ«å¾Œã®ã‚³ãƒ¼ãƒ‰ã‚’ã¿ã‚‹ã¨ `React.createElement()` ãŒå‘¼ã°ã‚Œã¦ã„ã‚‹ã®ãŒã‚ã‹ã‚Šã¾ã™ã€‚
ã•ãã»ã©ã®ã‚¨ãƒ©ãƒ¼ã§ React ãŒå­˜åœ¨ã—ãªã„ã¨ã„ã‚ã‚ŒãŸã®ã¯ã“ã®ãŸã‚ã§ã™ã€‚

```js
"use strict";

var Foo = function Foo() {
  return /*#__PURE__*/React.createElement("h1", null, "Hello World");
};
```

### å¾“æ¥ã® JSX Transform ã§ React ã‚’ import ã—ãŸå ´åˆ
æ¬¡ã®ä¾‹ã§ã¯ React ã‚’ import ã—ã¦ãƒˆãƒ©ãƒ³ã‚¹ãƒ‘ã‚¤ãƒ«ã—ã¾ã™ã€‚
```jsx
import React from 'react'

const Foo = () => {
  return <h1>Hello World</h1>
}
```

require ã•ã‚ŒãŸ React ãŒä½¿ç”¨ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã›ãšå®Ÿè¡Œã§ãã¾ã™ã€‚
å¾“æ¥ã® JSX Transform ã§ã¯ã“ã®ãƒˆãƒ©ãƒ³ã‚¹ãƒ‘ã‚¤ãƒ«å¾Œã®ã‚³ãƒ¼ãƒ‰ã‚’æ„è­˜ã—ã¦ React ã‚’ import ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã—ãŸã€‚
```js
"use strict";

var _react = _interopRequireDefault(require("react"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var Foo = function Foo() {
  return /*#__PURE__*/_react["default"].createElement("h1", null, "Hello World");
};
```


## æ–°ã—ã„ JSX Transform ã®å ´åˆ
```jsx
const Foo = () => {
  return <h1>Hello World</h1>
}
```

React ã‚’ import ã—ãªãã¦ã‚‚ react/jsx-runtime ãŒèª­ã¿è¾¼ã¾ã‚Œã¾ã™ã€‚

```js
import {jsx as _jsx} from 'react/jsx-runtime';

var Foo = function Foo() {
  return _jsx('h1', { children: 'Hello world' });
}
```

# å¯¾å¿œçŠ¶æ³
React 17 ã®ã»ã‹ React 16.xã€React 15.xã€React 0.14.x ã¸ã®ãƒãƒƒã‚¯ãƒãƒ¼ãƒˆã‚‚äºˆå®šã•ã‚Œã¦ãŠã‚Šã€
ä¸»è¦ãªç’°å¢ƒã ã¨ä¸‹è¨˜ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‹ã‚‰åˆ©ç”¨å¯èƒ½ã§ã™ã€‚
* Create React App: v4.0 ( Î²ãƒ†ã‚¹ãƒˆä¸­ ) ä»¥é™
* Next.js: v9.5.3 ä»¥é™
* Gatsbt: v2.24.5 ä»¥é™


# æ—¢å­˜ã®ã‚³ãƒ¼ãƒ‰ã¸ã®å¯¾å¿œ
React ã‚’ import ã™ã‚‹å¿…è¦ãŒãªããªã£ãŸãŸã‚ä¸è¦ãª import ã‚’å‰Šé™¤ã™ã‚‹ãƒ„ãƒ¼ãƒ«ãŒå­˜åœ¨ã—ã¾ã™ã€‚

```sh
npx react-codemod update-react-imports
```

ã“ã®ãƒ„ãƒ¼ãƒ«ã¯ä¸è¦ãª import ã ã‘ã‚’å‰Šé™¤ã—ã¦ãã‚Œã¦ã€`React.useState()` ã®ã‚ˆã†ã«ä½¿ç”¨ã—ã¦ã„ã‚‹ç®‡æ‰€ã‚‚é©åˆ‡ã«åˆ†å‰² import ã«ç½®ãæ›ãˆã¾ã™ã€‚

### React ãŒä½¿ã‚ã‚Œã¦ã„ãªã„ãƒ‘ã‚¿ãƒ¼ãƒ³
ä¸è¦ãª import ãŒå«ã¾ã‚Œã‚‹ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›ã—ãŸä¾‹ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚
```jsx
import React from 'react'

const Foo = () => {
  return <h1>Hello World</h1>
}
```

å¤‰æ›å¾Œã®ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ã¯ import ãŒå‰Šé™¤ã•ã‚Œã¾ã—ãŸã€‚
```jsx
const Foo = () => {
  return <h1>Hello World</h1>
}
```

### React ãŒä½¿ã‚ã‚Œã¦ã„ã‚‹ãƒ‘ã‚¿ãƒ¼ãƒ³

ã¤ãŽã« React.useState() ãŒä½¿ã‚ã‚Œã¦ã„ã‚‹ã‚³ãƒ¼ãƒ‰ã‚’å¤‰æ›ã—ãŸä¾‹ã‚’ç´¹ä»‹ã—ã¾ã™ã€‚
```jsx
import React from 'react'

const Foo = () => {
  const [text, setText] = React.useState('Hello World')
  return <h1>{text}</h1>
}
```

useState ã®ã¿ãŒåˆ†å‰² import ã•ã‚Œã€4 è¡Œç›®ã®ã‚³ãƒ¼ãƒ‰ã‚‚ç½®ãæ›ãˆã‚‰ã‚Œã¾ã—ãŸã€‚
```jsx
import { useState } from 'react'

const Foo = () => {
  const [text, setText] = useState('Hello World')
  return <h1>{text}</h1>;
}
```
